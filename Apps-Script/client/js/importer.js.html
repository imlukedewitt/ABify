<script>
  const SUBDOMAINS = {
    luke: 'luke',
  };

  function startImport() {
    const siteName = $('#site-select').val();
    UI.logHtml('Importing data...');
    UI.disableImportButton();
    UI.setCursorLoading();

    Server.run(null, 'startImporter', {
      siteName: siteName,
      subdomain: SUBDOMAINS[siteName],
      template: $('#action-select').val()
    }).then((response) => {
      UI.logSuccess(response);
      UI.enableImportButton();
      UI.setCursorNormal();
    }).catch((error) => {
      UI.logHtml('Error: ' + error.message);
      UI.enableImportButton();
      UI.setCursorNormal();
    });
  }

  $(document).ready(() => {
    UI.populateObjects();
    UI.setupEventListeners();
    console.log('Waking up ABify');
    Server.run('ABify', 'wakeUp')
      .then(() => {
        console.log('ABify is awake');
        UI.enableImportButton();
      });
  });
</script>